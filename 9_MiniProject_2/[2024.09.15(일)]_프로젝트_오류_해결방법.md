# [2024.09.12(목)] 프로젝트 오류 해결 방법


- jpql 값이 안 넘어오는 오류
    - 문제 : 데이터 개수는 맞게 넘어오지만 값이 null이다.
        
        ```json
        {
            "result": "success",
            "rankingDtoV4": {
                "worldCupWorldCupCodeDtoV4": {
                    "worldCupId": null,
                    "title": null,
                    "award": null
                },
                "worldCupResultCandidateUsersDtoV4": [
                    {
                        "grade": null,
                        "image": null,
                        "name": null,
                        "vote": null
                    },
                    {
                        "grade": null,
                        "image": null,
                        "name": null,
                        "vote": null
                    },
                    {
                        "grade": null,
                        "image": null,
                        "name": null,
                        "vote": null
                    },
                    {
                        "grade": null,
                        "image": null,
                        "name": null,
                        "vote": null
                    },
                    {
                        "grade": null,
                        "image": null,
                        "name": null,
                        "vote": null
                    }
                ],
                "totalVote": 32,
                "commentsUsersDtoV4": [
                    {
                        "name": null,
                        "commentsCreatedAt": null,
                        "content": null
                    },
                    {
                        "name": null,
                        "commentsCreatedAt": null,
                        "content": null
                    },
                    {
                        "name": null,
                        "commentsCreatedAt": null,
                        "content": null
                    },
                    {
                        "name": null,
                        "commentsCreatedAt": null,
                        "content": null
                    },
                    {
                        "name": null,
                        "commentsCreatedAt": null,
                        "content": null
                    },
                    {
                        "name": null,
                        "commentsCreatedAt": null,
                        "content": null
                    },
                    {
                        "name": null,
                        "commentsCreatedAt": null,
                        "content": null
                    },
                    {
                        "name": null,
                        "commentsCreatedAt": null,
                        "content": null
                    },
                    {
                        "name": null,
                        "commentsCreatedAt": null,
                        "content": null
                    },
                    {
                        "name": null,
                        "commentsCreatedAt": null,
                        "content": null
                    }
                ]
            },
            "rankingDtoV4List": null
        }
        ```
        
    - 해결 방안 : JPQL에서 반환된 칼럼명이 Projection과 맞지 않아서 데이터가 넘어오지 않았다.
        
        JPQL에 as 칼럼명을 추가하여 칼럼명을 똑같이 맞춘다.
        
        ```sql
        @Query("""
            SELECT wcr.grade as grade, u.image as image, u.name as name, c.vote as vote
            FROM WorldCupResult wcr
            JOIN wcr.candidate c
            JOIN c.user u
            WHERE wcr.worldCup.worldCupId = :worldCupId
            ORDER BY wcr.grade
            """)
        ```